\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{cases}
\usepackage{booktabs}
\usepackage{graphicx}

\usepackage[bottom]{footmisc}

% Format
\usepackage{anysize}
\usepackage[a4paper, top=20mm, bottom=20mm, left=15mm, right=15mm]{geometry}
\columnsep 4mm
% \linespread{0.95}
% \usepackage[a4paper, top=29mm, bottom=30mm, left=15mm, right=15mm]{geometry}
% \columnsep 5mm
% \linespread{1}

% Balance the columns on the last page
\usepackage{flushend}

% Bibliography
\usepackage{csquotes}
\usepackage[backend=biber, maxnames=1, sorting=none]{biblatex}
\renewcommand*{\bibfont}{\small}

% Text
\newcommand{\qoi}{QOI}
\newcommand{\qois}{QOIs}

\newcommand{\qom}{QOM}
\newcommand{\qoms}{QOMs}

\newcommand{\ie}{\emph{i.e.}}
\newcommand{\eg}{\emph{e.g.}}
\newcommand{\etc}{\emph{etc.}}
\newcommand{\perse}{\emph{per se}}

\makeatletter
\def\stage#1{\@ifnextchar\bgroup{\stageDouble{#1}}{\stageSingle{#1}}}
\def\stageSingle#1{Stage~#1}
\def\stageDouble#1#2{Stage~#1.\hspace{0.5em}\emph{#2}}
\makeatother

\newcommand{\blindreview}{%
  \textnormal{%
    $\text{HIDDEN FOR BLIND REVIEW}$%
  }%
}

\usepackage{array}
\newcolumntype{=}{>{\global\let\currentrowstyle\relax}}
\newcolumntype{-}{>{\currentrowstyle}}
\newcommand{\rowstyle}[1]{\gdef\currentrowstyle{#1}%
  #1\ignorespaces
}

% Tables and figures
\setlength{\topsep}{0pt}
\setlength{\abovecaptionskip}{5pt}
\setlength{\belowcaptionskip}{0pt}
\renewcommand{\arraystretch}{1.0}
\setlength{\tabcolsep}{4pt}

% Formulas
\setlength\abovedisplayskip{5pt}
\setlength\belowdisplayskip{5pt}

% References
\newcommand{\eref}[1]{Eq.~(\ref{equ:#1})}
\newcommand{\sref}[1]{Sec.~\ref{sec:#1}}
\newcommand{\aref}[1]{Appendix~\ref{app:#1}}
\newcommand{\fref}[1]{Fig.~\ref{fig:#1}}
\newcommand{\tref}[1]{Tab.~\ref{tab:#1}}

\newcommand{\elabel}[1]{\label{equ:#1}}
\newcommand{\slabel}[1]{\label{sec:#1}}
\newcommand{\alabel}[1]{\label{app:#1}}
\newcommand{\flabel}[1]{\label{fig:#1}}
\newcommand{\tlabel}[1]{\label{tab:#1}}

% Sets
\newcommand{\real}{\mathbb{R}}

% Linear algebra
\newcommand{\m}[1]{\mathbf{#1}}
\renewcommand{\v}[1]{\mathbf{#1}}

\newcommand{\abs}[1]{| #1 |}
\newcommand{\norm}[1]{\| #1 \|}

\newcommand{\vI}{\v{e}}
\newcommand{\mI}{\m{I}}
\newcommand{\mOne}{\m{I}}
\newcommand{\vZero}{\v{0}}

\newcommand{\diag}[1]{\text{diag}(#1)}

% Probability theory
\renewcommand{\o}{\omega}
\newcommand{\outcomes}{\Omega}
\newcommand{\sigmaAlgebra}{\mathcal{F}}
\newcommand{\probabilityMeasure}{\mathbb{P}}
\newcommand{\probabilitySpace}{(\outcomes, \sigmaAlgebra, \probabilityMeasure)}

\newcommand{\gaussian}[2]{\mathcal{N}\left( #1, #2 \right)}
\newcommand{\gaussianp}[2]{\mathcal{GP}\left( #1, #2 \right)}
\newcommand{\sichisquared}[2]{\text{Scale-inv-}\chi^2\left( #1, #2 \right)}
\newcommand{\studentst}[3]{t_{#1}\left( #2, #3 \right)}

\makeatletter
\def\f#1{\@ifnextchar\bgroup{\fWithTwoArguments{#1}}{\fWithOneArgument{#1}}}
\def\fWithTwoArguments#1#2{p_{#1}( #2 )}
\def\fWithOneArgument#1{p( #1 )}

\def\fMean{\@ifnextchar\bgroup{\fMeanWithArgument}{\fMeanWithoutArgument}}
\def\fMeanWithArgument#1{\mu(#1)}
\def\fMeanWithoutArgument{\mu}

\def\fCov{\@ifnextchar\bgroup{\fCovWithArgument}{\fCovWithoutArgument}}
\def\fCovWithArgument#1{k(#1)}
\def\fCovWithoutArgument{k}

\def\E{\@ifnextchar\bgroup{\EWithArgument}{\EWithoutArgument}}
\def\EWithArgument#1{\mathbb{E}\left( #1 \right)}
\def\EWithoutArgument{\mathbb{E}}
\makeatother

\newcommand{\Cov}[1]{\mathbb{C}\text{ov}\left( #1 \right)}

\newcommand{\mCov}{\m{K}}

\newcommand{\mean}{\mu}
\newcommand{\vmean}{{\boldsymbol\mu}}

% Karhunen-Loeve expansion
\newcommand{\domain}{\mathcal{R}}
\newcommand{\mKL}{\m{L}}

% Temperature
\newcommand{\T}{q}
\newcommand{\vT}{\v{q}}
\newcommand{\mT}{\m{Q}}
\newcommand{\mvT}{\v{q}}
\newcommand{\amb}{\text{amb}}
\newcommand{\meas}{\text{msr}}

% Power
\newcommand{\p}{p}
\renewcommand{\P}{p}
\newcommand{\vP}{\v{p}}
\newcommand{\mP}{\m{P}}
\newcommand{\dyn}{\text{dyn}}
\newcommand{\leak}{\text{leak}}

% Thermal model
\renewcommand{\t}{t}

\newcommand{\specification}{\mathcal{S}}

\newcommand{\vX}{\v{x}}
\newcommand{\mC}{\m{C}}
\newcommand{\mG}{\m{G}}
\newcommand{\mM}{\m{B}}

% Data model
\renewcommand{\r}{r}
\newcommand{\vr}{\v{r}}

% Quantity of interest
\renewcommand{\u}{u}
\newcommand{\vu}{\v{u}}
\newcommand{\mU}{\m{U}}

% Quantity of measure
\newcommand{\q}{q}
\newcommand{\vq}{\v{q}}
\newcommand{\mQ}{\m{Q}}

\makeatletter
\def\oBB{\@ifnextchar\bgroup{\oBBPlus}{\oBBZero}}
\def\oBBPlus#1{\@ifnextchar\bgroup{\oBBTwo{#1}}{\oBBOne{#1}}}
\def\oBBTwo#1#2{f_{#1}\left(#2\right)}
\def\oBBOne#1{f\left(#1\right)}
\def\oBBZero{f}
\makeatother

% Statistical model
\newcommand{\QData}{\mathcal{Q}}
\newcommand{\UData}{\mathcal{U}}

\newcommand{\noise}{\epsilon}
\newcommand{\mnoise}{\boldsymbol\epsilon}
\newcommand{\vnoise}{\boldsymbol\epsilon}

\newcommand{\z}{z}
\newcommand{\vz}{\v{z}}

\newcommand{\param}{\theta}
\newcommand{\Param}{\Theta}

\newcommand{\vparam}{{\boldsymbol\theta}}

\newcommand{\SE}{\text{SE}}
\newcommand{\OU}{\text{OU}}

\newcommand{\mOI}{\m{J}}

% Profiles
\newcommand{\profile}[1]{( #1, \partition{#1} )}

\newcommand{\partition}[1]{\tau[#1]}

\makeatletter
\def\profileP{\@ifnextchar\bgroup{\profilePWithArgument}{\profilePWithoutArgument}}
\def\profilePWithArgument#1{\profile{\mP(#1)}}
\def\profilePWithoutArgument{\profile{\mP}}

\newcommand{\profilePdyn}{(\mP_\dyn, \partition{\mP})}

\def\profileT{\@ifnextchar\bgroup{\profileTWithArgument}{\profileTWithoutArgument}}
\def\profileTWithArgument#1{\profile{\mT(#1)}}
\def\profileTWithoutArgument{\profile{\mT}}
\makeatother

% Numbers
\newcommand{\ndies}{{n_\text{d}}}
\newcommand{\nrdies}{{n_\text{d}'}}

\newcommand{\nprocs}{{n_\text{p}}}
\newcommand{\nrprocs}{{n_\text{p}'}}

\newcommand{\nsteps}{{n_\text{t}}}
\newcommand{\nrsteps}{{n_\text{t}'}}

\newcommand{\nnodes}{{n_\text{n}}}
\newcommand{\nvars}{{n_\text{v}}}

\newcommand{\nsamples}{{n_\text{mc}}}
